{% extends "core/base.html" %}
{% load humanize %}
{% block content %}

<div class="container py-5">

  <div class="card mb-4 shadow-sm rounded-3 overflow-hidden">
    <div class="px-4 py-3 text-white" style="background-color:#122135;">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h3 class="mb-0">Proyecto</h3>
          <small class="opacity-75">
            {{ proyecto.direccion|default:"Proyecto de inversi√≥n inmobiliaria" }}
          </small>
        </div>

        <div class="d-flex gap-2">
          <a href="{% url 'core:memoria_economica' proyecto.id %}"
             class="btn btn-outline-light btn-sm">
            üìÑ Memoria econ√≥mica
          </a>

          <a href="{% url 'core:lista_proyectos' %}"
             class="btn btn-outline-light btn-sm">
            ‚Üê Volver
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100">
        <div class="card-body">
          <div class="small text-muted">Capital objetivo</div>
          <div class="fw-bold">
            {{ proyecto.capital_objetivo|default:0|floatformat:0|intcomma }} ‚Ç¨
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100">
        <div class="card-body">
          <div class="small text-muted">Capital captado</div>
          <div class="fw-bold">
            0 ‚Ç¨
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100">
        <div class="card-body">
          <div class="small text-muted">Rentabilidad estimada</div>
          <div class="fw-bold">
            {{ proyecto.rentabilidad_estimada|default:0|floatformat:2 }} %
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center h-100">
        <div class="card-body">
          <div class="small text-muted">Estado</div>
          <div class="fw-bold">
            {{ proyecto.estado }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BLOQUE CAPTACI√ìN -->
  <div class="card mb-4 shadow-sm rounded-3">
    <div class="p-3">
      <h5>Estado de la inversi√≥n</h5>

      <div class="mb-2">
        <div class="small text-muted">Inversi√≥n pendiente por cubrir</div>
        <div class="progress" style="height: 10px;">
          <div class="progress-bar bg-warning"
               role="progressbar"
               style="width: 100%;"
               aria-valuenow="100"
               aria-valuemin="0"
               aria-valuemax="100">
          </div>
        </div>
        <div class="small text-muted mt-1 text-end">
          100 % pendiente
        </div>
      </div>

      <ul class="mb-0">
        <li>Capital objetivo:
          <span class="fw-semibold">{{ proyecto.capital_objetivo|default:0|floatformat:0|intcomma }} ‚Ç¨</span>
        </li>
        <li>Capital captado:
          0 ‚Ç¨
        </li>
        <li>Capital pendiente:
          <span class="fw-semibold">{{ proyecto.capital_objetivo|default:0|floatformat:0|intcomma }} ‚Ç¨</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- BLOQUE ECON√ìMICO -->
  <div class="card mb-4 shadow-sm rounded-3">
    <div class="p-3">
      <h5>Resumen econ√≥mico del proyecto</h5>
      <div class="row text-center">
        <div class="col-md-3 mb-3">
          <div class="small text-muted">Compra</div>
          <div class="fw-bold">
            {{ proyecto.precio_compra_estimado|default:0|floatformat:0|intcomma }} ‚Ç¨
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="small text-muted">Costes</div>
          <div class="fw-bold">
            {{ proyecto.costes_totales|default:0|floatformat:0|intcomma }} ‚Ç¨
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="small text-muted">Venta</div>
          <div class="fw-bold">
            {{ proyecto.precio_venta_estimado|default:0|floatformat:0|intcomma }} ‚Ç¨
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="small text-muted">Rentabilidad</div>
          <div class="fw-bold">
            {{ proyecto.rentabilidad_estimada|default:0|floatformat:2 }} %
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BLOQUE INMUEBLE -->
  <div class="card mb-4 shadow-sm rounded-3">
    <div class="p-3">
      <h5>Datos del inmueble</h5>
      <ul class="mb-0">
        <li>Direcci√≥n: {{ proyecto.direccion|default:"--" }}</li>
        <li>Referencia catastral: {{ proyecto.referencia_catastral|default:"--" }}</li>
        <li>Municipio: {{ proyecto.municipio|default:"--" }}</li>
      </ul>
    </div>
  </div>

  <!-- BLOQUE PART√çCIPES -->
  <div class="card mb-4 shadow-sm rounded-3">
    <div class="p-3">
      <h5>Part√≠cipes / Inversores</h5>
      <p class="text-muted mb-0">
        A√∫n no hay inversores asociados a este proyecto.
      </p>
    </div>
  </div>

</div>

{% endblock %}