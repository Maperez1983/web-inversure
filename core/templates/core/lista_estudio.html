{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="inversure-app">
  <section class="inversure-section">
    <div class="container">

      <section class="inversure-section-header mb-5 text-center">
        <h1 class="inversure-section-title">Estudios</h1>
        <div class="inversure-divider mx-auto"></div>
        <p class="inversure-section-subtitle mx-auto">
          Estudios de viabilidad en fase de análisis avanzado
        </p>
      </section>

      <div class="card shadow-sm mb-5">
        <div class="card-body">
          {% if estudios %}
            {% for estudio in estudios %}
              <div class="d-flex justify-content-between align-items-center py-4 border-bottom estudio-row">
                <div>
                  <h6 class="mb-1 fw-semibold inversure-title">
                    {{ estudio.nombre|default:"Estudio sin nombre" }}
                  </h6>
                  <div class="small text-muted mb-1">
                    {{ estudio.direccion|default:"Sin dirección definida" }}
                  </div>
                  <span class="badge rounded-pill bg-light text-primary border">
                    En estudio
                  </span>
                </div>
                <div class="ms-3 d-flex gap-2">
                  <a href="{% url 'core:simulador' estudio.id %}" class="btn btn-inversure-outline px-4">
                    Abrir estudio
                  </a>

                  <form method="post" action="{% url 'core:borrar_estudio' estudio.id %}"
                        onsubmit="return confirm('¿Seguro que quieres borrar este estudio?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger px-4">
                      Borrar
                    </button>
                  </form>
                </div>
              </div>
            {% endfor %}
          {% else %}
            <div class="text-center text-muted py-4">
              No hay estudios en curso.
            </div>
          {% endif %}
        </div>
      </div>

    </div>
  </section>
</div>
<style>
  .estudio-row {
    transition: all 0.2s ease;
  }
  .estudio-row:hover {
    background-color: #f8f9fa;
  }
  .inversure-title {
    color: #14263f;
  }

  .btn-inversure-outline {
    color: #14263f;
    border: 1px solid #14263f;
    background-color: transparent;
    font-weight: 500;
  }

  .btn-inversure-outline:hover {
    background-color: #14263f;
    color: #ffffff;
  }
</style>
{% endblock %}