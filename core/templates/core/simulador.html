{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inversure ¬∑ Simulador de operaciones</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
    }
    h1 {
      margin-bottom: 30px;
    }
    .box {
      border: 1px solid #ddd;
      padding: 20px;
      margin-bottom: 25px;
      border-radius: 6px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    header img {
      max-height: 90px;
      width: auto;
    }
  </style>
</head>

<body>

<header>
  <img src="{% static 'core/logo.png' %}" alt="Inversure">
</header>

<h1>Inversure ¬∑ Simulador de operaciones</h1>

<form method="post">
  {% csrf_token %}

  <div class="box">
    <h2>1Ô∏è‚É£ Datos principales</h2>

    <label>Precio compra</label>
    <input type="number" step="0.01" name="precio_compra" required>

    <label>Precio venta</label>
    <input type="number" step="0.01" name="precio_venta" required>

    <label>Meses de la operaci√≥n</label>
    <input type="number" name="meses" required>

    <label>% Financiaci√≥n</label>
    <input type="number" step="0.01" name="financiacion">
  </div>

  <div class="box">
    <h2>2Ô∏è‚É£ Gastos de adquisici√≥n</h2>

    <p><em>ITP (2 %), notar√≠a y registro se calculan autom√°ticamente</em></p>

    <label>Gestor√≠a compra</label>
    <input type="number" step="0.01" name="gestoria_compra">

    <label>Captaci√≥n / reservas</label>
    <input type="number" step="0.01" name="captacion">

    <label>Otros gastos adquisici√≥n</label>
    <input type="number" step="0.01" name="otros_adquisicion">
  </div>

  <div class="box">
    <h2>3Ô∏è‚É£ Inversi√≥n inicial</h2>

    <label>Reforma</label>
    <input type="number" step="0.01" name="reforma">

    <label>Limpieza inicial</label>
    <input type="number" step="0.01" name="limpieza_inicial">

    <label>Mobiliario</label>
    <input type="number" step="0.01" name="mobiliario">

    <label>Otros puesta en marcha</label>
    <input type="number" step="0.01" name="otros_puesta_marcha">
  </div>

  <div class="box">
    <h2>4Ô∏è‚É£ Gastos recurrentes</h2>

    <label>Comunidad</label>
    <input type="number" step="0.01" name="comunidad">

    <label>IBI</label>
    <input type="number" step="0.01" name="ibi">

    <label>Seguros</label>
    <input type="number" step="0.01" name="seguros">

    <label>Suministros</label>
    <input type="number" step="0.01" name="suministros">

    <label>Limpieza peri√≥dica</label>
    <input type="number" step="0.01" name="limpieza_periodica">

    <label>Ocupas / incidencias</label>
    <input type="number" step="0.01" name="incidencias">

    <label>Otros recurrentes</label>
    <input type="number" step="0.01" name="otros_recurrentes">
  </div>

  <div class="box">
    <h2>5Ô∏è‚É£ Gastos de venta</h2>

    <label>Plusval√≠a municipal</label>
    <input type="number" step="0.01" name="plusvalia">

    <label>Inmobiliaria</label>
    <input type="number" step="0.01" name="inmobiliaria">

    <label>Gestor√≠a venta</label>
    <input type="number" step="0.01" name="gestoria_venta">

    <label>Otros gastos venta</label>
    <input type="number" step="0.01" name="otros_venta">
  </div>

  <button type="submit">Calcular operaci√≥n</button>
</form>

{% if resultado %}
<div class="box">
  <h2>üìä Resultados econ√≥micos</h2>

  <p><strong>Inversi√≥n total:</strong> {{ resultado.inversion_total }} ‚Ç¨</p>
  <p><strong>Beneficio bruto:</strong> {{ resultado.beneficio_bruto }} ‚Ç¨</p>
  <p><strong>Beneficio part√≠cipes:</strong> {{ resultado.beneficio_participes }} ‚Ç¨</p>
  <p><strong>Rentabilidad total:</strong> {{ resultado.rentabilidad }} %</p>
  <p><strong>Rentabilidad anualizada:</strong> {{ resultado.rentabilidad_anual }} %</p>
</div>
{% endif %}

</body>
</html>
